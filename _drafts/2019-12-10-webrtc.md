---
title: WebRTC
date: 2018-10-31 00:00:00 +01:00
header:
  teaser: "/assets/images/academy/webrtc.png"
  image: "/assets/images/academy/webrtc.png"
categories:
- academy
tags:
- academy
- telephony
excerpt: "A guide to help you know more about WebRTC."
---

A guide to help you know more about WebRTC.

###### Introduction

WebRTC offers real time communication to send media  natively from a web-browser.
Is also a media engine with standardize javascript APIs, handled by the IETF and W3C.

webrtc.org is a open source project (software stack) that holds an implementation of the specification

While we still need to somehow signal from one browser to the other so we will be able to locate each other, once that signaling is over, we can send them messages directly between the two browsers – without the web server ever touching the messages
This is why many refer to WebRTC as a peer-to-peer technology.

WebRTC protocol stack

https://hpbn.co/assets/diagrams/f91164cbbb944d8986c90a1e93afcd82.svg

Needs clients and servers.

##### Main APIs
* `getUserMedia` acquires the audio and video media (by accessing a device's camera, screen or microphone).
* `RTCPeerConnection` enables audio and video communication between peers. It performs signal processing, codec handling, peer-to-peer communication, security, encoding, NAT  and bandwidth management.
* `RTCDataChannel` allows bidirectional communication of arbitrary data between peers. It uses the same API as WebSockets and has very low latency.

The WebRTC API also includes a statistics function:
`getStats` allows the web application to retrieve a set of statistics about WebRTC sessions.

##### Browser architecture
Browser
Browser Engine > chromium  and has the implementation of WebRTC
Renderer Blink: Fork of webkit
Runtime Javascript V8

![img](https://miro.medium.com/max/803/1*UPTde0WH3eD6Kpo_82ziVA.png)


Electro > based in chromium Blink V8 and Node JS Window

##### Connection


* Browser/Application
* webserver - that runs the logic of the app
* signaling servers - send the sdp to negotiate media, with stateful information
* nat servers - ICE procedure to have allow to route the media between the devices
* media servers - manage and convert media
  * SFU media router
  * MCU - media mixer
  * recording server

Steps to connect a WebRCT session
* Discovery - How to find the user, out of scope of WebRTC. locate our destination and being able to reach the user.
* Negotiation - Negotiate the session parameter by the application, negotiate the connection of the users or the media server gateways.
* Conversation - Getting the session connected and sending the media.

JSEP Negotiation (Javascript Session Establishment Protocol)
offer  - offer blob (SDP) and an answer.

* User A create a OFFER. The application sends the OFFER through a signaling server.
* OFFER is accepted by B, create an ANSWER and send to A.

##### Disconnections

--------------------------------------------------------------------------------


* https://webrtchacks.com
* https://telecom.altanai.com/webrtc/

Unified Plan or Plan B (Group Call)
VP8* codec
ICE-TCP
JNI Bindings
PJSIP
webview

#### Others

##### tools
* [chrome webrtc internals](chrome://webrtc-internals/)
* [sipjs](https://sipjs.com/), JS library that takes care of WebRTC and SIP signaling.

* [W3C Media Capture and Streams](https://w3c.github.io/mediacapture-main/)
* [Anatomy of a WebRTC SDP](https://webrtchacks.com/sdp-anatomy/)
* [How Zoom’s web client avoids using WebRTC](https://webrtchacks.com/zoom-avoids-using-webrtc/)
* [How to get webrtc-internals using js](https://stackoverflow.com/questions/24066850/is-there-an-api-for-the-chrome-webrtc-internals-variables-in-javascript)
* [ietf draft - Media Transport and Use of RTP](https://tools.ietf.org/html/draft-perkins-rtcweb-rtp-usage)
* [webrtc-internals documentation](https://testrtc.com/webrtc-internals-documentation/)


webrtcHacks – This site has a low frequency high quality publishing policy. The content is highly technical, very useful and stands the test of times. Whenever you have a technical issue with a “topic” in WebRTC – search it first on webrtcHacks for a detailed explanation
WebRTC Standards – This site focuses on the specification changes done in WebRTC. Follow it to make sure you prepare in advance for the modifications and additions coming to the standard. They also host a Live Q&A every month or so
WebRTC Glossary – This is a site I maintain. It holds the many acronyms and terms used in WebRTC with short explanations on each and some useful links to additional resources
WebRTC Weekly – The WebRTC Weekly curates the best content about WebRTC every week and sends it out via email to subscribers
WebRTC Index – This is where companies showcase their WebRTC products, and where you can find vendors to assist you with your own needs

https://webrtc.org/start/
https://codelabs.developers.google.com/codelabs/webrtc-web/#0
https://github.com/webrtc/adapter the glue that sticks your code to the different browser implementations of WebRTC.
https://bloggeek.me/common-beginner-mistakes-in-webrtc/
https://github.com/webrtc/samples official samples repository with good clean code for you to use as reference
https://blog.addpipe.com/audio-constraints-getusermedia/
https://blog.addpipe.com/getusermedia-video-constraints/
https://blog.addpipe.com/common-getusermedia-errors/
https://www.callstats.io/blog/2017/12/12/signaling-state-changes

https://bloggeek.me/how-webrtc-works/

#### Test
* https://test.webrtc.org/
* https://appr.tc/
* https://testrtc.com/webrtc-api-trace/


##### References:
  *
